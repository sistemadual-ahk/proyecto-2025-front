<div class="container">
  <!-- Main Content -->
  <div class="main">
    <!-- Back and Title -->
    <app-page-title title="Análisis de Gastos" (back)="goBack()"></app-page-title>

    <!-- Tabs & Month Selector -->
    <div class="tabs-row">
      <div class="tabs">
        <button class="tab" [class.active]="selectedPeriod === 'weekly'" (click)="changePeriod('weekly')">Semanal</button>
        <button class="tab" [class.active]="selectedPeriod === 'monthly'" (click)="changePeriod('monthly')">Mensual</button>
        <button class="tab" [class.active]="selectedPeriod === 'annual'" (click)="changePeriod('annual')">Anual</button>
      </div>
    </div>

    <div class="month-selector">
      <button class="arrow" (click)="previousPeriod()"><i class="mdi mdi-chevron-left"></i></button>
      <div class="month">{{ formattedDate }}</div>
      <button class="arrow" (click)="nextPeriod()" [disabled]="!canGoNext"><i class="mdi mdi-chevron-right"></i></button>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
      <!-- Donut Chart Card -->
      <div class="card">
        <div class="card-title">Gastos por categoría</div>
        <apx-chart
          [series]="donutChartOptions.series"
          [chart]="donutChartOptions.chart"
          [labels]="donutChartOptions.labels"
          [title]="donutChartOptions.title"
          [colors]="donutChartOptions.colors"
          [plotOptions]="donutChartOptions.plotOptions"
          [dataLabels]="donutChartOptions.dataLabels"
          [legend]="donutChartOptions.legend"
        ></apx-chart>
      </div>

      <!-- Line Chart Card -->
      <div class="card">
        <div class="card-title">Evolución de gastos mensuales</div>
        <apx-chart
          [series]="monthlyChartOptions.series"
          [chart]="monthlyChartOptions.chart"
          [xaxis]="monthlyChartOptions.xaxis"
          [title]="monthlyChartOptions.title"
          [colors]="monthlyChartOptions.colors"
          [stroke]="monthlyChartOptions.stroke"
          [markers]="monthlyChartOptions.markers"
          [grid]="monthlyChartOptions.grid"
        ></apx-chart>
      </div>

      <!-- Bar Chart Card -->
      <div class="card">
        <div class="card-title">Gastos por categoría (Barras)</div>
        <apx-chart
          [series]="categoryChartOptions.series"
          [chart]="categoryChartOptions.chart"
          [xaxis]="categoryChartOptions.xaxis"
          [title]="categoryChartOptions.title"
          [colors]="categoryChartOptions.colors"
          [plotOptions]="categoryChartOptions.plotOptions"
          [grid]="categoryChartOptions.grid"
        ></apx-chart>
      </div>

      <!-- Income vs Expenses Chart -->
      <div class="card">
        <div class="card-title">Ingresos vs Gastos</div>
        <apx-chart
          [series]="incomeVsExpensesOptions.series"
          [chart]="incomeVsExpensesOptions.chart"
          [xaxis]="incomeVsExpensesOptions.xaxis"
          [title]="incomeVsExpensesOptions.title"
          [colors]="incomeVsExpensesOptions.colors"
          [fill]="incomeVsExpensesOptions.fill"
          [stroke]="incomeVsExpensesOptions.stroke"
          [grid]="incomeVsExpensesOptions.grid"
        ></apx-chart>
      </div>
    </div>

    <!-- Insight Cards -->
    <div class="insight-card">
      <div class="insight-icon">
        <i class="mdi mdi-alert-decagram-outline"></i>
      </div>
      <div class="insight-content">
        <div class="insight-title">Gasto inusual detectado</div>
        <div class="insight-text">
          El gasto en Delivery aumentó un 30% respecto a la semana pasada
        </div>
      </div>
    </div>
    <div class="insight-card">
      <div class="insight-icon">
        <i class="mdi mdi-lightbulb-on-outline"></i>
      </div>
      <div class="insight-content">
        <div class="insight-title">Consejo de ahorro</div>
        <div class="insight-text">
          ¿Sabías que podés ahorrar $150 este mes siguiendo los siguientes consejos?
        </div>
      </div>
    </div>
  </div>
</div>
